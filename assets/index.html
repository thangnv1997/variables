<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharmacy Warehouse Management</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1>üè• Pharmacy Warehouse Manager</h1>
            <p>Multi-warehouse inventory with FEFO and expiry tracking</p>
        </header>

        <main>
            <!-- Main Navigation Tabs -->
            <section class="card">
                <div class="tabs main-tabs">
                    <button class="tab-btn active" data-tab="warehouses">Warehouses</button>
                    <button class="tab-btn" data-tab="suppliers">Suppliers</button>
                    <button class="tab-btn" data-tab="stock">Stock Batches</button>
                    <button class="tab-btn" data-tab="transfers">Internal Transfers</button>
                    <button class="tab-btn" data-tab="expiring">‚ö†Ô∏è Expiring Soon</button>
                    <button class="tab-btn" data-tab="history">History</button>
                </div>

                <!-- Warehouses Tab -->
                <div id="warehouses" class="tab-content active">
                    <div class="section-header">
                        <h3>Warehouse Management</h3>
                        <button class="btn-primary btn-sm" onclick="openCreateWarehouseModal()">+ Create
                            Warehouse</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Total Batches</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="warehouseList"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Suppliers Tab -->
                <div id="suppliers" class="tab-content">
                    <div class="section-header">
                        <h3>Supplier Management</h3>
                        <button class="btn-primary btn-sm" onclick="openCreateSupplierModal()">+ Create
                            Supplier</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Contact</th>
                                    <th>Phone</th>
                                    <th>Address</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="supplierList"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Stock Batches Tab -->
                <div id="stock" class="tab-content">
                    <div class="section-header">
                        <h3>Stock Batches</h3>
                        <button class="btn-primary btn-sm" onclick="openImportBatchModal()">+ Import Batch</button>
                    </div>
                    <div class="filter-group">
                        <label>Filter by Warehouse:</label>
                        <select id="warehouseFilter" onchange="filterStockByWarehouse()">
                            <option value="">All Warehouses</option>
                        </select>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Batch ID</th>
                                    <th>Medicine</th>
                                    <th>Warehouse</th>
                                    <th>Quantity</th>
                                    <th>Price</th>
                                    <th>Expiry Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="stockBatchList"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Internal Transfers Tab -->
                <div id="transfers" class="tab-content">
                    <div class="section-header">
                        <h3>Internal Transfers</h3>
                        <button class="btn-primary btn-sm" onclick="openTransferModal()">+ Transfer Batch</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Transfer ID</th>
                                    <th>Medicine</th>
                                    <th>From</th>
                                    <th>To</th>
                                    <th>Quantity</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="transferList"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Expiring Soon Tab -->
                <div id="expiring" class="tab-content">
                    <div class="alert alert-warning">
                        <strong>‚ö†Ô∏è Warning:</strong> The following batches will expire within 90 days
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Batch ID</th>
                                    <th>Medicine</th>
                                    <th>Warehouse</th>
                                    <th>Quantity</th>
                                    <th>Expiry Date</th>
                                    <th>Days Left</th>
                                </tr>
                            </thead>
                            <tbody id="expiringList"></tbody>
                        </table>
                    </div>
                </div>

                <!-- History Tab -->
                <div id="history" class="tab-content">
                    <div class="tabs sub-tabs">
                        <button class="tab-btn active" data-tab="import-history">Import</button>
                        <button class="tab-btn" data-tab="export-history">Export</button>
                    </div>

                    <div id="import-history" class="tab-content active">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Medicine</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Time</th>
                                    </tr>
                                </thead>
                                <tbody id="importList"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="export-history" class="tab-content">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Medicine</th>
                                        <th>Amount</th>
                                        <th>Price</th>
                                        <th>Time</th>
                                    </tr>
                                </thead>
                                <tbody id="exportList"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Create Warehouse Modal -->
    <div id="createWarehouseModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('createWarehouseModal')">&times;</span>
            <h2>Create Warehouse</h2>
            <form id="createWarehouseForm">
                <div class="form-group">
                    <label for="warehouseName">Warehouse Name</label>
                    <input type="text" id="warehouseName" required placeholder="e.g., Main Warehouse">
                </div>
                <div class="form-group">
                    <label for="warehouseType">Type</label>
                    <select id="warehouseType" required>
                        <option value="Main">Main Warehouse (Kho Ch√≠nh)</option>
                        <option value="Store">Pharmacy Store (Kho Nh√† Thu·ªëc)</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">Create</button>
            </form>
        </div>
    </div>

    <!-- Edit Warehouse Modal -->
    <div id="editWarehouseModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('editWarehouseModal')">&times;</span>
            <h2>Edit Warehouse</h2>
            <form id="editWarehouseForm">
                <input type="hidden" id="editWarehouseId">
                <div class="form-group">
                    <label for="editWarehouseName">Warehouse Name</label>
                    <input type="text" id="editWarehouseName" required>
                </div>
                <div class="form-group">
                    <label for="editWarehouseType">Type</label>
                    <select id="editWarehouseType" required>
                        <option value="Main">Main Warehouse (Kho Ch√≠nh)</option>
                        <option value="Store">Pharmacy Store (Kho Nh√† Thu·ªëc)</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">Save Changes</button>
            </form>
        </div>
    </div>

    <!-- Create Supplier Modal -->
    <div id="createSupplierModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('createSupplierModal')">&times;</span>
            <h2>Create Supplier</h2>
            <form id="createSupplierForm">
                <div class="form-group">
                    <label for="supplierName">Supplier Name</label>
                    <input type="text" id="supplierName" required>
                </div>
                <div class="form-group">
                    <label for="supplierContact">Contact Person</label>
                    <input type="text" id="supplierContact" required>
                </div>
                <div class="form-group">
                    <label for="supplierPhone">Phone</label>
                    <input type="text" id="supplierPhone" required>
                </div>
                <div class="form-group">
                    <label for="supplierAddress">Address</label>
                    <input type="text" id="supplierAddress" required>
                </div>
                <button type="submit" class="btn-primary">Create</button>
            </form>
        </div>
    </div>

    <!-- Edit Supplier Modal -->
    <div id="editSupplierModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('editSupplierModal')">&times;</span>
            <h2>Edit Supplier</h2>
            <form id="editSupplierForm">
                <input type="hidden" id="editSupplierId">
                <div class="form-group">
                    <label for="editSupplierName">Supplier Name</label>
                    <input type="text" id="editSupplierName" required>
                </div>
                <div class="form-group">
                    <label for="editSupplierContact">Contact Person</label>
                    <input type="text" id="editSupplierContact" required>
                </div>
                <div class="form-group">
                    <label for="editSupplierPhone">Phone</label>
                    <input type="text" id="editSupplierPhone" required>
                </div>
                <div class="form-group">
                    <label for="editSupplierAddress">Address</label>
                    <input type="text" id="editSupplierAddress" required>
                </div>
                <button type="submit" class="btn-primary">Save Changes</button>
            </form>
        </div>
    </div>

    <!-- Import Batch Modal -->
    <div id="importBatchModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('importBatchModal')">&times;</span>
            <h2>Import Batch</h2>
            <form id="importBatchForm">
                <div class="form-group">
                    <label for="importMedicineId">Medicine ID</label>
                    <input type="number" id="importMedicineId" required>
                </div>
                <div class="form-group">
                    <label for="importMedicineName">Medicine Name</label>
                    <input type="text" id="importMedicineName" required>
                </div>
                <div class="form-group">
                    <label for="importWarehouse">Warehouse</label>
                    <select id="importWarehouse" required></select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="importQuantity">Quantity</label>
                        <input type="number" id="importQuantity" required min="1">
                    </div>
                    <div class="form-group">
                        <label for="importPrice">Price (VND)</label>
                        <input type="number" id="importPrice" step="0.01" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="importExpiryDate">Expiry Date</label>
                    <input type="date" id="importExpiryDate" required>
                </div>
                <button type="submit" class="btn-primary">Import</button>
            </form>
        </div>
    </div>

    <!-- Transfer Batch Modal -->
    <div id="transferModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('transferModal')">&times;</span>
            <h2>Transfer Batch</h2>
            <form id="transferForm">
                <div class="form-group">
                    <label for="transferBatchId">Batch ID</label>
                    <input type="number" id="transferBatchId" required>
                </div>
                <div class="form-group">
                    <label for="transferToWarehouse">To Warehouse</label>
                    <select id="transferToWarehouse" required></select>
                </div>
                <div class="form-group">
                    <label for="transferQuantity">Quantity</label>
                    <input type="number" id="transferQuantity" required min="1">
                </div>
                <button type="submit" class="btn-primary">Transfer</button>
            </form>
        </div>
    </div>

    <script src="/assets/script.js"></script>
</body>

</html>